<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Battleship - Battleship</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<video id="full-screen-bg" autoplay muted loop>
    <source src="portada_video.mp4" type="video/mp4">
    Tu navegador no soporta el v√≠deo.
</video>

<div class="container">
    <h1 id="game-title" class="main-title"> Battleship </h1>

    <div id="login-panel">
        <h1>CAPTAIN'S LOG</h1>

        <input type="text" id="username" placeholder="Enter your Nickname">
        <div id="login-error" class="error-msg"></div>

        <button onclick="createGame()">¬°START BATTLE!</button>

        <button onclick="showRanking()" style="background-color: #f1c40f; color: #2c3e50; margin-top: 10px;">
            üèÜ HALL OF FAME
        </button>
    </div>

    <div id="ranking-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content-ranking">
            <h2>üèÜ TOP CAPTAINS üèÜ</h2>
            <div id="ranking-list" class="ranking-list">
                <p>Cargando datos...</p>
            </div>
            <button class="btn-exit" onclick="closeRanking()">CLOSE</button>
        </div>
    </div>

    <div id="game-panel" style="display:none;">
        <div class="status-bar">
            <span id="turn-indicator">Shift: PREPARING...</span>
            <span id="game-status">Status: IN PROGRESS</span>
        </div>

        <div class="boards-container">

            <div class="side-column left-column">
                <div id="player-status-panel" class="status-panel"></div>

                <div id="cpu-alert-panel" class="side-panel"></div>
            </div>

            <div class="board-section">
                <h2>YOUR FLEET</h2>
                <div id="player-board" class="board"></div>
            </div>

            <div class="board-section">
                <h2>ENEMY WATERS</h2>
                <div id="cpu-board" class="board enemy-board"></div>
            </div>

            <div class="side-column right-column">
                <div id="cpu-status-panel" class="status-panel"></div>

                <div id="player-alert-panel" class="side-panel"></div>
            </div>

        </div>
    </div>
</div>

<div id="game-over-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content-image">

        <video id="result-video" muted loop playsinline></video>

        <div class="buttons-overlay">
            <button class="btn-new" onclick="stopWinMusic(); createGame()">NEW GAME</button>

            <audio id="winAudio"><source src="/win.mp3" type="audio/mpeg"></audio>
            <audio id="loseAudio" loop><source src="/lose.mp3" type="audio/mpeg"></audio>

            <button class="btn-exit" onclick="stopWinMusic(); location.reload()">EXIT</button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script src="game.js"></script>

<div id="shot-message" class="shot-message"></div>

<audio id="introAudio" loop>
    <source src="/Intro.mp3" type="audio/mpeg">
    Tu navegador no soporta audio.
</audio>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var audio = document.getElementById("introAudio");

        // üîâ INICIO: Volumen al 40% (0.4)
        audio.volume = 0.4;

        // Intentar reproducir autom√°ticamente
        var playPromise = audio.play();

        if (playPromise !== undefined) {
            playPromise.catch(error => {
                console.log("Autoplay bloqueado. Esperando interacci√≥n...");
                document.addEventListener('click', function() {
                    audio.play();
                }, { once: true });
            });
        }
    });
</script>

</body>
</html>